!function(e){function n(i){if(r[i])return r[i].exports;var t=r[i]={i:i,l:!1,exports:{}};return e[i].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var r={};n.m=e,n.c=r,n.i=function(e){return e},n.d=function(e,r,i){n.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=1)}([function(e,n,r){"use strict";function i(){var e="BE8PyI95I_jBIfb_LTS_nkUJnOwjLP2zAaGBSFEi3jmFJ3l5ox7-NtNqrVuyPL4Qmt4UxDI-YgwYI1sEMIpoU90=",n=e.replace(/-/g,"+").replace(/_/g,"/"),r=atob(n).split("").map(function(e){return e.charCodeAt(0)});return new Uint8Array(r)}function t(e){document.querySelector(".js-subscription").innerHTML=JSON.stringify(e.toJSON())}Object.defineProperty(n,"__esModule",{value:!0});var o=r(2),u=function(e){return e&&e.__esModule?e:{default:e}}(o),s=(0,u.default)(),c="error",a="subscribed",f=function(){"serviceWorker"in navigator?navigator.serviceWorker.register("/service-worker.js").then(function(e){return d(),console.log("ServiceWorker registration successful.",e),e}).catch(function(e){console.error("ServiceWorker registration failed.",e)}):console.log("Service workers aren’t supported in this browser.")},d=function(){return"showNotification"in ServiceWorkerRegistration.prototype?"denied"===Notification.permission?void console.error("The user has blocked notifications."):"PushManager"in window?void navigator.serviceWorker.ready.then(function(e){e.pushManager.getSubscription().then(function(e){s.emit("supported"),e&&(t(e),s.emit(a))}).catch(function(e){console.error("Error during getSubscription()",e)})}):void console.error("Push messaging isn’t supported."):void console.error("Notifications aren’t supported.")},l=function(){function e(){s.emit(c,"Um Push-Benachrichtigungen zu erhalten, müssen Sie Benachrichtigungen für diese Website in Ihrem Browser erlauben."),b()}function n(){navigator.serviceWorker.ready.then(function(e){e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:i()}).then(function(e){t(e),s.emit(a)}).catch(function(e){console.error("Unable to subscribe to messaging server.",e),s.emit(c,"Bei der Anmeldung am externen Benachrichtigungsdienst ist ein Fehler aufgetreten. Bitte versuchen Sie es in ein paar Minuten wieder oder wenden sich an Ihren Ansprechpartner.")})})}return"denied"===Notification.permission?void e():"default"===Notification.permission?void Notification.requestPermission().then(function(r){if("granted"!==r)return void e();n()}):void n()},b=function(){navigator.serviceWorker.ready.then(function(e){e.pushManager.getSubscription().then(function(e){if(!e)return void s.emit("unsubscribed");e.unsubscribe().then(function(){s.emit("unsubscribed")}).catch(function(e){console.error("Unable to unsubscribe to messaging server.",e),s.emit(c,"Bei der Abmeldung am externen Benachrichtigungsdienst ist ein Fehler aufgetreten. Sie werden von uns dennoch keine Push-Benachrichtigungen mehr erhalten.")})}).catch(function(e){console.error("Error during getSubscription()",e)})})};n.default={init:f,on:s.on,SUPPORTED:"supported",ERROR:c,SUBSCRIBED:a,UNSUBSCRIBED:"unsubscribed",subscribe:l,unsubscribe:b}},function(e,n,r){"use strict";var i=r(0),t=function(e){return e&&e.__esModule?e:{default:e}}(i),o=document.querySelector(".js-button"),u=!1;o.addEventListener("click",function(){u?(o.disabled=!0,t.default.unsubscribe(),o.innerHTML="Enable Push Notifications"):(o.disabled=!0,t.default.subscribe(),o.innerHTML="Disable Push Notifications"),u=!u}),t.default.on(t.default.SUBSCRIBED,function(){u=!0}),t.default.on(t.default.UNSUBSCRIBED,function(){u=!1}),t.default.on("*",function(){o.disabled=!1}),t.default.init()},function(e,n,r){"use strict";function i(e){return e=e||Object.create(null),{on:function(n,r){(e[n]||(e[n]=[])).push(r)},off:function(n,r){e[n]&&e[n].splice(e[n].indexOf(r)>>>0,1)},emit:function(n,r){(e[n]||[]).map(function(e){e(r)}),(e["*"]||[]).map(function(e){e(n,r)})}}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=i}]);